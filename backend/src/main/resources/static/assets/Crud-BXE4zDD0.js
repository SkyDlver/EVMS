import{aV as w,aH as I,r as m,e as R,o as T,c as B,a as p,b as a,w as r,aW as t,t as x,f as $,a4 as Y}from"./index-DZ6pyUV_.js";import{s as j}from"./index-BzTyvDpa.js";import{s as v}from"./index-gJtFOxG6.js";import{s as K}from"./index-0G4iFW53.js";import{s as n}from"./index-BEj4KcLD.js";import{s as E}from"./index-D6odhD5j.js";import{s as M}from"./index-Bpv_Glkp.js";import{s as W}from"./index-D6U9lRec.js";import"./index-DZMaiIJm.js";import"./index-D-qnh6E1.js";import"./index-CpYwi2r-.js";import"./index-BI2TqYt1.js";import"./index-Bd8fUoSB.js";import"./index-BXnmXUH9.js";import"./index-Cs3V9pvj.js";import"./index-Cvtpt9tc.js";import"./index-BBBay3Qo.js";import"./index-OD7hWtSw.js";import"./index-B6QwTwZs.js";import"./index-CEeOWgkr.js";import"./index-DEKje_E2.js";import"./index-CQDlZ0eZ.js";import"./index-Dexz6ftf.js";import"./index-DS1QBUwf.js";const V={async getEmployees({departmentId:u,page:s=1,size:N=10,sort:d="id"}={}){const y={departmentId:u,page:s,size:N,sort:d};return(await w.get("/api/employees",{params:y})).data},async getEmployeeById(u){return(await w.get(`/api/employees/${u}`)).data},async createEmployee(u){return(await w.post("/api/employees",u)).data},async updateEmployee(u,s){return(await w.put(`/api/employees/${u}`,s)).data},async deleteEmployee(u){await w.delete(`/api/employees/${u}`)}},q={class:"card"},z={class:"flex justify-between items-center"},G={class:"flex flex-col gap-4"},Ne={__name:"Crud",setup(u){const s=I(),N=m(null),d=m([]),y=m(!1),b=m(!1),g=m(!1),o=m({}),f=m([]),C=m(!1),k=m({global:{value:null,matchMode:Y.CONTAINS}});R(()=>P());async function P(){try{const i=await V.getEmployees();d.value=Array.isArray(i)?i:[]}catch(i){s.add({severity:"error",summary:"Error",detail:"Failed to load employees",life:3e3}),console.error(i)}}function U(){o.value={},C.value=!1,y.value=!0}function D(){y.value=!1,C.value=!1}async function S(){var i,e;if(C.value=!0,!(!((i=o.value.firstName)!=null&&i.trim())||!((e=o.value.lastName)!=null&&e.trim())))try{if(o.value.id){const l=await V.updateEmployee(o.value.id,o.value),c=d.value.findIndex(O=>O.id===l.id);c!==-1&&(d.value[c]=l),s.add({severity:"success",summary:"Updated",detail:"Employee updated",life:3e3})}else{const l=await V.createEmployee(o.value);d.value.push(l),s.add({severity:"success",summary:"Created",detail:"Employee created",life:3e3})}D(),o.value={}}catch(l){s.add({severity:"error",summary:"Error",detail:"Failed to save employee",life:3e3}),console.error(l)}}function A(i){o.value={...i},y.value=!0}function F(i){o.value=i,b.value=!0}async function H(){try{await V.deleteEmployee(o.value.id),d.value=d.value.filter(i=>i.id!==o.value.id),b.value=!1,f.value=f.value.filter(i=>i.id!==o.value.id),s.add({severity:"success",summary:"Deleted",detail:"Employee deleted",life:3e3})}catch(i){s.add({severity:"error",summary:"Error",detail:"Failed to delete employee",life:3e3}),console.error(i)}}function L(){g.value=!0}async function h(){try{const i=f.value.map(e=>e.id);await Promise.all(i.map(e=>V.deleteEmployee(e))),d.value=d.value.filter(e=>!i.includes(e.id)),f.value=[],g.value=!1,s.add({severity:"success",summary:"Deleted",detail:"Selected employees deleted",life:3e3})}catch(i){s.add({severity:"error",summary:"Error",detail:"Failed to delete selected employees",life:3e3}),console.error(i)}}return(i,e)=>(T(),B("div",null,[p("div",q,[a(t(K),{class:"mb-6"},{start:r(()=>[a(t(n),{label:"New",icon:"pi pi-plus",class:"mr-2",onClick:U}),a(t(n),{label:"Delete",icon:"pi pi-trash",onClick:L,disabled:!f.value.length},null,8,["disabled"])]),end:r(()=>[a(t(n),{label:"Export",icon:"pi pi-upload",onClick:e[0]||(e[0]=l=>{var c;return(c=N.value.value)==null?void 0:c.exportCSV()})})]),_:1}),a(t(j),{ref_key:"dt",ref:N,selection:f.value,"onUpdate:selection":e[2]||(e[2]=l=>f.value=l),value:d.value,dataKey:"id",selectionMode:"multiple",paginator:!0,rows:10,filters:k.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} employees"},{header:r(()=>[p("div",z,[e[14]||(e[14]=p("h4",{class:"m-0"},"Manage Employees",-1)),a(t(E),{modelValue:k.value.global.value,"onUpdate:modelValue":e[1]||(e[1]=l=>k.value.global.value=l),placeholder:"Search...",class:"w-1/3"},null,8,["modelValue"])])]),default:r(()=>[a(t(v),{selectionMode:"multiple",style:{width:"3rem"}}),a(t(v),{field:"firstName",header:"First Name",sortable:""}),a(t(v),{field:"lastName",header:"Last Name",sortable:""}),a(t(v),{field:"middleName",header:"Middle Name",sortable:""}),a(t(v),{field:"roleInCompany",header:"Role",sortable:""}),a(t(v),{field:"hiredAt",header:"Hired At",sortable:""}),a(t(v),{field:"isOnHoliday",header:"Holiday",sortable:""},{body:r(l=>[p("span",null,x(l.data.isOnHoliday?"Yes":"No"),1)]),_:1}),a(t(v),{exportable:!1},{body:r(l=>[a(t(n),{icon:"pi pi-pencil",outlined:"",rounded:"",class:"mr-2",onClick:c=>A(l.data)},null,8,["onClick"]),a(t(n),{icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:c=>F(l.data)},null,8,["onClick"])]),_:1})]),_:1},8,["selection","value","filters"])]),a(t(M),{visible:y.value,"onUpdate:visible":e[9]||(e[9]=l=>y.value=l),header:"Employee Details",modal:!0,style:{width:"450px"}},{footer:r(()=>[a(t(n),{label:"Cancel",text:"",icon:"pi pi-times",onClick:D}),a(t(n),{label:"Save",icon:"pi pi-check",onClick:S})]),default:r(()=>[p("div",G,[a(t(E),{modelValue:o.value.firstName,"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.firstName=l),modelModifiers:{trim:!0},placeholder:"First Name"},null,8,["modelValue"]),a(t(E),{modelValue:o.value.lastName,"onUpdate:modelValue":e[4]||(e[4]=l=>o.value.lastName=l),modelModifiers:{trim:!0},placeholder:"Last Name"},null,8,["modelValue"]),a(t(E),{modelValue:o.value.middleName,"onUpdate:modelValue":e[5]||(e[5]=l=>o.value.middleName=l),modelModifiers:{trim:!0},placeholder:"Middle Name"},null,8,["modelValue"]),a(t(E),{modelValue:o.value.roleInCompany,"onUpdate:modelValue":e[6]||(e[6]=l=>o.value.roleInCompany=l),modelModifiers:{trim:!0},placeholder:"Role"},null,8,["modelValue"]),a(t(E),{type:"date",modelValue:o.value.hiredAt,"onUpdate:modelValue":e[7]||(e[7]=l=>o.value.hiredAt=l)},null,8,["modelValue"]),a(t(W),{modelValue:o.value.isOnHoliday,"onUpdate:modelValue":e[8]||(e[8]=l=>o.value.isOnHoliday=l)},null,8,["modelValue"]),e[15]||(e[15]=$(" On Holiday "))])]),_:1},8,["visible"]),a(t(M),{visible:b.value,"onUpdate:visible":e[11]||(e[11]=l=>b.value=l),header:"Confirm",modal:!0,style:{width:"400px"}},{footer:r(()=>[a(t(n),{label:"No",text:"",icon:"pi pi-times",onClick:e[10]||(e[10]=l=>b.value=!1)}),a(t(n),{label:"Yes",icon:"pi pi-check",onClick:H})]),default:r(()=>[p("p",null,[e[16]||(e[16]=$("Are you sure you want to delete ")),p("b",null,x(o.value.firstName)+" "+x(o.value.lastName),1),e[17]||(e[17]=$("?"))])]),_:1},8,["visible"]),a(t(M),{visible:g.value,"onUpdate:visible":e[13]||(e[13]=l=>g.value=l),header:"Confirm",modal:!0,style:{width:"400px"}},{footer:r(()=>[a(t(n),{label:"No",text:"",icon:"pi pi-times",onClick:e[12]||(e[12]=l=>g.value=!1)}),a(t(n),{label:"Yes",icon:"pi pi-check",onClick:h})]),default:r(()=>[e[18]||(e[18]=p("p",null,"Are you sure you want to delete the selected employees?",-1))]),_:1},8,["visible"])]))}};export{Ne as default};
